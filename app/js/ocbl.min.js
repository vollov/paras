"use strict";angular.module("ocblApp",["ui.router","auth"]).constant("API","/api/v1/").config(["$stateProvider","$urlRouterProvider","$httpProvider",function(t,e,r){t.state("home",{url:"/home",templateUrl:"views/home.html",data:{requireLogin:!1}}).state("profile",{url:"/profile",templateUrl:"views/profile.html",data:{requireLogin:!1}}),e.otherwise("home")}]).run(["$rootScope","$state","$http","AuthService",function(t,e,r,o){r.defaults.xsrfHeaderName="X-CSRFToken",r.defaults.xsrfCookieName="csrftoken"}]),angular.module("auth",["auth.controllers","ui.router"]).config(["$stateProvider",function(t){t.state("login",{url:"/login",templateUrl:"js/auth/views/login.html",controller:"LoginCtrl",controllerAs:"vm"}).state("register",{url:"/register",templateUrl:"js/auth/views/register.html",controller:"RegisterCtrl",controllerAs:"vm"})}]),angular.module("auth.controllers",["auth.services"]).controller("NavCtrl",[function(){}]).controller("RegisterCtrl",["$state","AuthService",function(t,e){var r=this;r.user={},r.register=function(){function t(t,r,o,n){e.login(email,password)}function o(t,e,r,o){console.error("register failure!")}return e.register(r.user).then(t,o)},activate(),r.activate=function(){e.isAuthenticated()&&t.go("profile")}}]).controller("LoginCtrl",["$state","AuthService",function(t,e){var r=this;r.user={},activate(),r.activate=function(){e.isAuthenticated()&&t.go("profile")},r.login=function(){e.login(r.user)}}]),angular.module("auth.services",[]).constant("host","http://localhost:5001").factory("AuthService",["$http","$cookies","API","host",function(t,e,r,o){var n={users:[],groups:[],key:"user-list"};return n.register=function(e){return t.post(o+"/api/v1/auth/login/",e)},serviec.logIn=function(e){function r(t,e,r,o){Authentication.setAuthenticatedAccount(t.data),window.location="/"}function o(t,e,r,o){console.error("login failure!")}return t.post(url+"/login",e).then(r,o)},n.logOut=function(){$window.localStorage.removeItem("beryl-client-token")},n.getAuthenticatedAccount=function(){if(e.authenticatedAccount)return JSON.parse(e.authenticatedAccount)},n.isAuthenticated=function(){return!!e.authenticatedAccount},n.setAuthenticatedAccount=function(t){e.authenticatedAccount=JSON.stringify(t)},n.unauthenticate=function(){delete e.authenticatedAccount},n}]);